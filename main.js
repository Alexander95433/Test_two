(()=>{"use strict";const e={config:{submitButtonSelector:".button-page_leave-request-submit",inputSelector:".leave-request__input",inputErrorClass:"leave-request__input_error",label:".leave-request__label",labelErrorClass:"leave-request__label_error",errorClass:".leave-request__error-span"},formElement:document.querySelector(".leave-request__form")};function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const o=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this._formElement=o,this._inputList=Array.from(this._formElement.querySelectorAll("".concat(this.config.inputSelector))),this._buttonElement=this._formElement.querySelector("".concat(this.config.submitButtonSelector)),this._label=this._formElement.querySelector("".concat(this.config.label))}var o,r;return o=e,(r=[{key:"enableValidation",value:function(){this._addListener()}},{key:"_addListener",value:function(){var e=this;this._disablSubmit(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checksValidation(t),e._disablSubmit()}))}))}},{key:"_checkingInputValidity",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_disablSubmit",value:function(){this._checkingInputValidity(this._inputList)?this._disableSubmitButton():this._enableSubmitButton()}},{key:"_checksValidation",value:function(e){e.validity.valid?this._removeErrorClass(e):this._addErrorClass(e,e.validationMessage)}},{key:"_addErrorClass",value:function(e,t){var o=this._formElement.querySelector(".".concat(e.id,"-error")),r=this._formElement.querySelector(".".concat(e.name,"-label-error"));o.textContent=t,e.classList.add("".concat(this.config.inputErrorClass)),o.classList.add("".concat(this.config.errorClass)),r.classList.add("".concat(this.config.labelErrorClass)),o.hidden=!1}},{key:"_removeErrorClass",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error")),o=this._formElement.querySelector(".".concat(e.name,"-label-error"));t.hidden=!0,t.textContent="",e.classList.remove("".concat(this.config.inputErrorClass)),o.classList.remove("".concat(this.config.labelErrorClass))}},{key:"_disableSubmitButton",value:function(){this._buttonElement.disabled=!0}},{key:"_enableSubmitButton",value:function(){this._buttonElement.disabled=!1}}])&&t(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),e}();function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._zoomCardsPicture=this._popup.querySelector(".popup__picture-zoom-cards"),this._zoomCardsTitle=this._popup.querySelector(".popup__title-zoom-cards"),this._zoomCardsSubtitle=this._popup.querySelector(".popup__subtitle-zoom-cards")}var t,o;return t=e,(o=[{key:"close",value:function(){this._popup.classList.remove("popup_visible"),document.removeEventListener("keydown",this._handleEscClose),this._handleEscClose=this._handleEscClose.bind(this)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_visible")&&e.close(),t.target.classList.contains("popup__close")&&e.close()}))}},{key:"open",value:function(e,t,o,r){this._zoomCardsPicture.src=t.src,this._zoomCardsPicture.alt=o.innerHTML,this._zoomCardsTitle.textContent=o.innerHTML,this._zoomCardsSubtitle.textContent=r.innerHTML,this._popup.classList.add("popup_visible"),document.addEventListener("keydown",this._handleEscClose)}}])&&r(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();Array.from(document.querySelectorAll(".portfolio__card")).forEach((function(e){var t=e.querySelector(".portfolio__card-picture"),o=e.querySelector(".portfolio__card-title"),r=e.querySelector(".portfolio__card-subtitle");t.addEventListener("click",(function(){n.open(e,t,o,r)}))}));var n=new i(".popup_zoom-cards");n.setEventListeners(),new o(e.config,e.formElement).enableValidation()})();